"use strict";(self.webpackChunkelite_angular_lite=self.webpackChunkelite_angular_lite||[]).push([[257],{9257:(B,m,i)=>{i.r(m),i.d(m,{UserModule:()=>E});var c=i(4755),d=i(2480),h=i(652),s=i(9401),e=i(2223),g=i(9765),p=i(5580),f=i(3648),u=i(9151),U=i(430);function Z(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"name is required"),". "))}function _(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"email is required")))}function v(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Please enter a valid email")))}function x(t,o){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,_,3,3,"span",10),e.YNc(2,v,3,3,"span",10),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.CreateUserForm.get("email").errors?null:n.CreateUserForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",null==n.CreateUserForm.get("email").errors?null:n.CreateUserForm.get("email").errors.email)}}function A(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"This email is already registered by another user")," "))}function C(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,A,3,3,"div",7),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==n.Result.duplicateEmail)}}function T(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Phone Number is required.")," "))}function b(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"This phone number is already registered by another user")," "))}function N(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,b,3,3,"div",7),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.Result.duplicatePhoneNumber)}}function q(t,o){if(1&t&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function I(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Role is required.")," "))}function F(t,o){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Password is required.")," "))}let L=(()=>{class t{constructor(n,r,l,a){this.AuthService=n,this.MatDilogRef=r,this.Toaster=l,this.translateService=a}ngOnInit(){this.InitializeForm(),this.GetRoles()}InitializeForm(){this.CreateUserForm=new s.cw({fullName:new s.NI(null,s.kI.required),email:new s.NI(null,[s.kI.required,s.kI.email]),phoneNumber:new s.NI(null,s.kI.required),roleId:new s.NI(null,s.kI.required),password:new s.NI(null,s.kI.required)})}GetRoles(){this.AuthService.GetRoles().subscribe({next:n=>{this.Roles=n}})}CreateUser(){this.AuthService.CreateUser(this.CreateUserForm.value).subscribe({next:n=>{this.Toaster.success(this.translateService.instant("User Created Successfuly")),this.MatDilogRef.close(!0)},error:n=>{console.log(n),this.Result=n.error}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.e),e.Y36(p.so),e.Y36(f._W),e.Y36(u.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mange-user"]],decls:44,vars:26,consts:[[1,"position-relative","p-3"],["matDialogClose","",1,"position-absolute",2,"top","7px","right","9px","cursor","pointer"],[1,"text-center",2,"font-weight","bold"],[1,"container","mt-3","p-3","position-relative","p-3",3,"formGroup"],[1,"form-group","mb-3"],["for","fullName",1,"form-label"],["id","fullName","formControlName","fullName","type","text","placeholder","Enter full name",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["for","email",1,"form-label"],["id","email","formControlName","email","type","email","placeholder","Enter email",1,"form-control"],[4,"ngIf"],["for","phoneNumber",1,"form-label"],["id","phoneNumber","formControlName","phoneNumber","type","text","placeholder","Enter phone number",1,"form-control"],["for","roleId",1,"form-label"],["id","roleId","formControlName","roleId",1,"form-select"],["disabled","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","password",1,"form-label"],["id","password","formControlName","password","type","password","placeholder","Enter password",1,"form-control"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger","mt-1"],[3,"value"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"mat-icon",1),e._uU(2,"close"),e.qZA(),e.TgZ(3,"h2",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"form",3)(7,"div",4)(8,"label",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,Z,3,3,"div",7),e.qZA(),e.TgZ(13,"div",4)(14,"label",8),e._uU(15,"Email:"),e.qZA(),e._UZ(16,"input",9),e.YNc(17,x,3,2,"div",7),e.YNc(18,C,2,1,"div",10),e.qZA(),e.TgZ(19,"div",4)(20,"label",11),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,T,3,3,"div",7),e.YNc(25,N,2,1,"div",10),e.qZA(),e.TgZ(26,"div",4)(27,"label",13),e._uU(28,"Role:"),e.qZA(),e.TgZ(29,"select",14)(30,"option",15),e._uU(31,"Select an Option"),e.qZA(),e.YNc(32,q,2,2,"option",16),e.qZA(),e.YNc(33,I,3,3,"div",7),e.qZA(),e.TgZ(34,"div",4)(35,"label",17),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"input",18),e.YNc(39,F,3,3,"div",7),e.qZA(),e.TgZ(40,"div",19)(41,"button",20),e.NdJ("click",function(){return r.CreateUser()}),e._uU(42),e.ALo(43,"translate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,16,"Create New User")," "),e.xp6(2),e.Q6J("formGroup",r.CreateUserForm),e.xp6(3),e.Oqu(e.lcZ(10,18,"name")),e.xp6(3),e.Q6J("ngIf",r.CreateUserForm.get("fullName").invalid&&r.CreateUserForm.get("fullName").touched),e.xp6(5),e.Q6J("ngIf",r.CreateUserForm.get("email").invalid&&r.CreateUserForm.get("email").touched),e.xp6(1),e.Q6J("ngIf",r.Result),e.xp6(3),e.hij("",e.lcZ(22,20,"Phone Number"),":"),e.xp6(3),e.Q6J("ngIf",r.CreateUserForm.get("phoneNumber").invalid&&r.CreateUserForm.get("phoneNumber").touched),e.xp6(1),e.Q6J("ngIf",r.Result),e.xp6(5),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",r.Roles),e.xp6(1),e.Q6J("ngIf",r.CreateUserForm.get("roleId").invalid&&r.CreateUserForm.get("roleId").touched),e.xp6(3),e.Oqu(e.lcZ(37,22,"Password")),e.xp6(3),e.Q6J("ngIf",r.CreateUserForm.get("password").invalid&&r.CreateUserForm.get("password").touched),e.xp6(2),e.Q6J("disabled",r.CreateUserForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(43,24,"Create User")," "))},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,U.Hw,p.ZT,u.X$]}),t})();var M=i(5226),J=i.n(M);function Y(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.OpenUserMangeDilog())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Create User")," "))}function w(t,o){1&t&&(e.TgZ(0,"th",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Permission")," "))}function S(t,o){1&t&&(e.TgZ(0,"th",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Actions")," "))}function y(t,o){if(1&t&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&t){const n=o.$implicit,r=e.oxw(2).$implicit;e.s9C("value",n.id),e.Q6J("selected",n.id===r.roleId),e.xp6(1),e.hij(" ",n.name," ")}}function R(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"th",11)(1,"select",12),e.NdJ("change",function(l){e.CHM(n);const a=e.oxw().$implicit,k=e.oxw();return e.KtG(k.OnRoleChange(l,a.id))}),e.YNc(2,y,2,3,"option",13),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",n.Roles)}}function O(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"th")(1,"i",15),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.DeleteUser(l.id))}),e.qZA()()}}function Q(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"th"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.qZA(),e.YNc(9,R,3,1,"th",9),e.YNc(10,O,2,0,"th",10),e.qZA()),2&t){const n=o.$implicit,r=e.oxw();e.xp6(2),e.Oqu(n.fullName),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.hij(" ",null==n.phoneNumber?"unknown":n.phoneNumber," "),e.xp6(2),e.Oqu(n.roleName),e.xp6(1),e.Q6J("ngIf",r.AuthService.IsManger()),e.xp6(1),e.Q6J("ngIf",r.AuthService.IsManger())}}const j=[{path:"",component:(()=>{class t{constructor(n,r,l,a){this.AuthService=n,this.MatDilog=r,this.Toaster=l,this.translateService=a,this.Lang=localStorage.getItem("lang")}ngOnInit(){this.GetUers(),this.GetRoles()}GetUers(){this.AuthService.GetUsers().subscribe({next:n=>{this.Users=n}})}GetRoles(){this.AuthService.GetRoles().subscribe({next:n=>{this.Roles=n}})}OpenUserMangeDilog(){this.MatDilog.open(L,{disableClose:!0}).afterClosed().subscribe({next:r=>{r&&this.GetUers()}})}DeleteUser(n){J().fire({title:this.translateService.instant("Are you sure?"),text:this.translateService.instant("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translateService.instant("Yes, delete it"),cancelButtonText:this.translateService.instant("Cancel")}).then(r=>{r.isConfirmed&&this.AuthService.Deleteuser(n).subscribe({next:l=>{this.Toaster.success(this.translateService.instant("User Deleted Successfuly")),this.GetUers()}})})}OnRoleChange(n,r){this.AuthService.ChangeRoleForUser({roleId:n.target.value,userId:r}).subscribe({next:a=>{this.Toaster.success(this.translateService.instant("Permission Changed Successfuly")),this.GetUers()},error:a=>{this.Toaster.success("Error")}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.e),e.Y36(p.uw),e.Y36(f._W),e.Y36(u.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],decls:22,vars:17,consts:[[2,"overflow-x","auto"],[1,"d-flex","justify-content-end"],["class","btn btn-primary m-1",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"bg-dark"],["scope","col",1,"text-light"],["scope","col","class","text-light",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-1",3,"click"],["style","padding: 10px",4,"ngIf"],[4,"ngIf"],[2,"padding","10px"],["aria-label","Default select example",1,"form-select",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fs-6","fa-solid","fa-trash","pointer",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Y,3,3,"button",2),e.qZA(),e.TgZ(3,"table",3)(4,"thead",4)(5,"tr")(6,"th",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",5),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",5),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,w,3,3,"th",6),e.YNc(19,S,3,3,"th",6),e.qZA()(),e.TgZ(20,"tbody"),e.YNc(21,Q,11,6,"tr",7),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",r.AuthService.IsManger()),e.xp6(1),e.uIk("dir","ar"===r.Lang?"rtl":"ltr"),e.xp6(4),e.Oqu(e.lcZ(8,9,"name")),e.xp6(3),e.Oqu(e.lcZ(11,11,"Email")),e.xp6(3),e.Oqu(e.lcZ(14,13,"mobile")),e.xp6(3),e.Oqu(e.lcZ(17,15,"Role")),e.xp6(2),e.Q6J("ngIf",r.AuthService.IsManger()),e.xp6(1),e.Q6J("ngIf",r.AuthService.IsManger()),e.xp6(2),e.Q6J("ngForOf",r.Users))},dependencies:[c.sg,c.O5,s.YN,s.Kr,u.X$]}),t})(),canActivate:[h.p]}];let G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(j),d.Bz]}),t})();var D=i(4493);let E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,G,s.UX,s.u5,D.m]}),t})()}}]);