"use strict";(self.webpackChunkelite_angular_lite=self.webpackChunkelite_angular_lite||[]).push([[135],{6135:(be,q,c)=>{c.r(q),c.d(q,{OrderModule:()=>Ze});var p=c(4755),S=c(2480),s=c(9401),m=c(5580),M=c(9171),F=c(5226),T=c.n(F),e=c(2223),u=c(1261),v=c(3144);let Z=(()=>{class n{constructor(t){this.httpClient=t}GetImages(t){return this.httpClient.get(u.N.BaseUrl+"/OrderImage/Images/"+t)}DeleteImage(t){return this.httpClient.delete(u.N.BaseUrl+"/OrderImage/DeleteImage/"+t)}BulkImport(t){return this.httpClient.post(u.N.BaseUrl+"/OrderImage/BulkImages/",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=c(3648),h=c(9151),x=c(7776),A=c(3583),b=c(8987),I=c(5465);function J(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"label",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",4),e.NdJ("change",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.OnFileChange(o))}),e.qZA()()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Import Images")))}let N=(()=>{class n{constructor(t,r,o,i,l,d,g,_,O){this.ImagesService=t,this.data=r,this.ToasterService=o,this.MatDilogref=i,this.TranslateService=l,this.CustomerServices=d,this.TechnicalService=g,this.StoreService=_,this.OrderTypeService=O,this.ToUpdate=!1}ngOnInit(){console.log("data = ",this.data),console.log("orderId = ",this.OrderId),console.log("Are they equal",null==this.OrderId),this.data.id||(this.data.id=this.OrderId.OrderId),this.GetImages()}GetImages(){this.ImagesService.GetImages(this.data.id).subscribe({next:t=>{console.log(t),this.galleryImages=t.map(r=>new M.vE({src:r.path,thumb:r.path}))}})}DeleteImage(t){T().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&this.ImagesService.DeleteImage(t).subscribe({next:o=>{this.ToasterService.success("OrderType Deleted Successfully"),this.GetImages()}})})}OnFileChange(t){console.log(this.data.id);const r=new FormData,o=t.target.files;if(console.log(o),o.length>4)this.ToasterService.error(this.TranslateService.instant("You are not allowed to upload more than 4 images."));else{for(let i=0;i<o.length;i++)r.append("formFiles",o[i],o[i].name);r.append("orderId",this.data.id),r.append("IsReceiving",String(!0)),this.ImagesService.BulkImport(r).subscribe({next:i=>{this.GetImages(),this.ToasterService.success(this.TranslateService.instant("Images Uploaded Successfuly"))}})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(m.WI),e.Y36(f._W),e.Y36(m.so),e.Y36(h.sK),e.Y36(x.v),e.Y36(A.e),e.Y36(b.d),e.Y36(I.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-galary"]],inputs:{OrderId:"OrderId",ToUpdate:"ToUpdate"},decls:2,vars:2,consts:[[3,"items"],["class","mt-3 d-flex justify-content-end",4,"ngIf"],[1,"mt-3","d-flex","justify-content-end"],["for","BulkImages",1,"btn","btn-primary",2,"margin","10px"],["type","file","id","BulkImages","multiple","","capture","environment",1,"d-none",3,"change"]],template:function(t,r){1&t&&(e._UZ(0,"gallery",0),e.YNc(1,J,5,3,"div",1)),2&t&&(e.Q6J("items",r.galleryImages),e.xp6(1),e.Q6J("ngIf",!r.ToUpdate))},dependencies:[M.vY,p.O5,h.X$],styles:[".image-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;padding:10px}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.MyCont[_ngcontent-%COMP%]   .div[_ngcontent-%COMP%]{bottom:-100%;transition:bottom .3s ease-in-out}.MyCont[_ngcontent-%COMP%]:hover   .div[_ngcontent-%COMP%]{bottom:50%}"]}),n})(),C=(()=>{class n{constructor(t){this.httpClient=t}GetOrders(t){return this.httpClient.get(u.N.BaseUrl+"/Order/Orders?query="+(t||""))}CreateOrder(t){return this.httpClient.post(u.N.BaseUrl+"/Order/CreateOrder",t)}EditOrder(t,r){return this.httpClient.post(u.N.BaseUrl+"/Order/EditOrder/"+r,t)}DeleteOrder(t){return this.httpClient.delete(u.N.BaseUrl+"/Order/DeleteOrder/"+t)}GetOrderById(t){return this.httpClient.get(u.N.BaseUrl+"/Order/GetOrderById/"+t)}GetOrderDetails(t){return this.httpClient.get(u.N.BaseUrl+"/Order/GetOrderDetails/"+t)}placedOrder(t){return this.httpClient.post(u.N.BaseUrl+"/Order/PlacedOrder/",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var G=c(9765),U=c(430);function w(n,a){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Create New Order")))}function L(n,a){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Update Order")))}function Y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"label",26),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",27),e.NdJ("change",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onFileChange(o))}),e.qZA()()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Upload Photos")))}function D(n,a){if(1&n&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.fullName," ")}}function Q(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Customer is required")," "))}function k(n,a){if(1&n&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function j(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Order Type is required")," "))}function B(n,a){if(1&n&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function E(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Store is required")," "))}function K(n,a){if(1&n&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function H(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Technical is required")," "))}function $(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Description is required")," "))}function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.CreateOrder())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.OrderForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(2,2,"Create Order")," ")}}function R(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.OpenGalary())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Order Images")," "))}function V(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.EditOrder())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.OrderForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(2,2,"Edit Order")," ")}}let P=(()=>{class n{constructor(t,r,o,i,l,d,g,_,O,xe,Ae){this.OrderTypeService=t,this.StoreService=r,this.TechnicalService=o,this.CustomerServices=i,this.OrderService=l,this.Toaster=d,this.AuthService=g,this.MatDilogRef=_,this.Dilog=O,this.id=xe,this.TranslateService=Ae,this.firstImageUrl=null}InitializeOrderForm(){this.OrderForm=new s.cw({CustomerId:new s.NI(null,s.kI.required),StoreId:new s.NI(null,s.kI.required),OrderTypeId:new s.NI(null,s.kI.required),TechnicalId:new s.NI(null,s.kI.required),Description:new s.NI(null,s.kI.required),UserId:new s.NI(this.AuthService.GetUserId()),images:new s.NI(null)})}ngOnInit(){this.InitializeOrderForm(),this.GetCusotmers(),this.GetOrderTypes(),this.GetStores(),this.GetTechnical(),this.id&&this.LoadOrder()}GetStores(){this.StoreService.GetStores().subscribe({next:t=>{this.Stores=t}})}GetTechnical(){this.TechnicalService.GetTechnicals().subscribe({next:t=>{this.Technicals=t}})}GetOrderTypes(){this.OrderTypeService.GetOrderTypes().subscribe({next:t=>{this.OrderTypes=t}})}GetCusotmers(){this.CustomerServices.GetCustomers().subscribe({next:t=>{this.Customers=t,console.log(t)}})}CreateOrder(){const t=new FormData,r=this.OrderForm.get("images")?.value;if(null!=r&&null!=r)if(r.length>4)this.Toaster.error(this.TranslateService.instant("You are not allowed to upload more than 4 images."));else{if(r instanceof FileList)for(let o=0;o<r.length;o++)t.append("images",r[o],r[o].name);else r instanceof File&&t.append("images",r,r.name);t.append("CustomerId",this.OrderForm.value.CustomerId),t.append("StoreId",this.OrderForm.value.StoreId),t.append("OrderTypeId",this.OrderForm.value.OrderTypeId),t.append("TechnicalId",this.OrderForm.value.TechnicalId),t.append("Description",this.OrderForm.value.Description),t.append("UserId",this.OrderForm.value.UserId),this.OrderService.CreateOrder(t).subscribe({next:o=>{this.Toaster.success(this.TranslateService.instant("Order Created Successfuly")),this.MatDilogRef.close(!0)}})}else this.Toaster.error(this.TranslateService.instant("please select at list one Image"))}onFileChange(t){const r=t.target.files;if(this.OrderForm.get("images")?.setValue(r),r.length>0){const o=r[0],i=new FileReader;i.onload=l=>{this.firstImageUrl=l.target.result},i.readAsDataURL(o)}else this.firstImageUrl=null}LoadOrder(){this.OrderService.GetOrderById(this.id).subscribe({next:t=>{console.log(t),this.OrderForm.setValue({CustomerId:t.customerId,StoreId:t.storeId,OrderTypeId:t.orderTypeId,TechnicalId:t.technicalId,Description:t.description,UserId:this.AuthService.GetUserId(),images:t.images||null})},error:t=>{console.error("Error loading order:",t)}})}EditOrder(){this.OrderService.EditOrder(this.OrderForm.value,this.id).subscribe({next:t=>{this.Toaster.success(this.TranslateService.instant("Order Updated Successfully")),this.MatDilogRef.close(!0)}})}OpenGalary(){this.Dilog.open(N,{data:{id:this.id,isUpdatable:!0}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.s),e.Y36(b.d),e.Y36(A.e),e.Y36(x.v),e.Y36(C),e.Y36(f._W),e.Y36(G.e),e.Y36(m.so),e.Y36(m.uw),e.Y36(m.WI),e.Y36(h.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mange-order"]],decls:48,vars:28,consts:[[1,"d-flex","gap-2","align-items-center","gap-3","flex-wrap",2,"overflow-y","auto"],[1,"p-3","mt-5","position-relative"],["matDialogClose","",1,"position-absolute",2,"top","-38px","right","10px","cursor","pointer"],[4,"ngIf"],[3,"formGroup"],["class","form-group mb-3",4,"ngIf"],[1,"d-flex","gap-2"],[1,"form-group","mb-3",2,"width","60%"],["for","customer"],["id","customer","formControlName","CustomerId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","mb-3",2,"width","40%"],["for","orderType"],["id","orderType","formControlName","OrderTypeId",1,"form-control"],["for","store"],["id","store","formControlName","StoreId",1,"form-control"],["for","technical"],["id","technical","formControlName","TechnicalId",1,"form-control"],[1,"form-group","mb-3"],["for","description"],["id","description","placeholder","Enter description","rows","3","formControlName","Description",1,"form-control"],[1,"d-flex","justify-content-end","m-2"],["type","submit","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"d-flex","justify-content-between","m-2"],["type","submit","class","btn btn-success",3,"click",4,"ngIf"],["for","photos"],["type","file","id","photos","accept","image/*","multiple","","capture","environment",1,"form-control",3,"change"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),e._uU(3,"close"),e.qZA(),e.YNc(4,w,3,3,"h2",3),e.YNc(5,L,3,3,"h2",3),e.TgZ(6,"form",4),e.YNc(7,Y,5,3,"div",5),e.TgZ(8,"div",6)(9,"div",7)(10,"label",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"select",9),e.YNc(14,D,2,2,"option",10),e.qZA(),e.YNc(15,Q,3,3,"div",11),e.qZA(),e.TgZ(16,"div",12)(17,"label",13),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"select",14),e.YNc(21,k,2,2,"option",10),e.qZA(),e.YNc(22,j,3,3,"div",11),e.qZA()(),e.TgZ(23,"div",6)(24,"div",12)(25,"label",15),e._uU(26," Store"),e.qZA(),e.TgZ(27,"select",16),e.YNc(28,B,2,2,"option",10),e.qZA(),e.YNc(29,E,3,3,"div",11),e.qZA(),e.TgZ(30,"div",7)(31,"label",17),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"select",18),e.YNc(35,K,2,2,"option",10),e.qZA(),e.YNc(36,H,3,3,"div",11),e.qZA()(),e.TgZ(37,"div",19)(38,"label",20),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"textarea",21),e.YNc(42,$,3,3,"div",11),e.qZA(),e.TgZ(43,"div",22),e.YNc(44,X,3,4,"button",23),e.qZA(),e.TgZ(45,"div",24),e.YNc(46,R,3,3,"button",25),e.YNc(47,V,3,4,"button",23),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",!r.id),e.xp6(1),e.Q6J("ngIf",r.id),e.xp6(1),e.Q6J("formGroup",r.OrderForm),e.xp6(1),e.Q6J("ngIf",!r.id),e.xp6(4),e.hij(" ",e.lcZ(12,20,"Customer"),""),e.xp6(3),e.Q6J("ngForOf",r.Customers),e.xp6(1),e.Q6J("ngIf",r.OrderForm.controls.CustomerId.invalid&&r.OrderForm.controls.CustomerId.touched),e.xp6(3),e.hij(" ",e.lcZ(19,22,"Order Type"),""),e.xp6(3),e.Q6J("ngForOf",r.OrderTypes),e.xp6(1),e.Q6J("ngIf",r.OrderForm.controls.OrderTypeId.invalid&&r.OrderForm.controls.OrderTypeId.touched),e.xp6(6),e.Q6J("ngForOf",r.Stores),e.xp6(1),e.Q6J("ngIf",r.OrderForm.controls.StoreId.invalid&&r.OrderForm.controls.StoreId.touched),e.xp6(3),e.hij(" ",e.lcZ(33,24,"Technical"),""),e.xp6(3),e.Q6J("ngForOf",r.Technicals),e.xp6(1),e.Q6J("ngIf",r.OrderForm.controls.TechnicalId.invalid&&r.OrderForm.controls.TechnicalId.touched),e.xp6(3),e.Oqu(e.lcZ(40,26,"Description")),e.xp6(3),e.Q6J("ngIf",r.OrderForm.controls.Description.invalid&&r.OrderForm.controls.Description.touched),e.xp6(2),e.Q6J("ngIf",!r.id),e.xp6(2),e.Q6J("ngIf",r.id),e.xp6(1),e.Q6J("ngIf",r.id))},dependencies:[p.sg,p.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,U.Hw,m.ZT,h.X$],styles:[".container[_ngcontent-%COMP%]{max-width:600px}h2[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{resize:none}"]}),n})(),W=(()=>{class n{constructor(t){this.httpClient=t}GetParts(){return this.httpClient.get(u.N.BaseUrl+"/Part/Parts")}CreatePart(t){return this.httpClient.post(u.N.BaseUrl+"/Part/CreatePart",t)}EditPart(t,r){return this.httpClient.post(u.N.BaseUrl+"/Part/EditPart/"+t,r)}DeletePart(t){return this.httpClient.delete(u.N.BaseUrl+"/Part/DeletePart/"+t)}GetPartsByOrderId(t){return this.httpClient.get(u.N.BaseUrl+"/Part/GetPartsByOrderId/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z(n,a){1&n&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"No parts available. Please add a new part to continue.")," "))}function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"div",11)(3,"label",12),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",13,14),e.qZA()(),e.TgZ(8,"div")(9,"div",11)(10,"label",15),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"input",16,17),e.NdJ("input",function(){const i=e.CHM(t).index,l=e.oxw();return e.KtG(l.calculateTotal(i))}),e.qZA()()(),e.TgZ(15,"div")(16,"div",11)(17,"label",18),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"input",19,20),e.NdJ("input",function(){const i=e.CHM(t).index,l=e.oxw();return e.KtG(l.calculateTotal(i))}),e.qZA()()(),e.TgZ(22,"div")(23,"div",11)(24,"label",21),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"input",22,23),e.qZA()(),e.TgZ(29,"div",24)(30,"i",25),e.NdJ("click",function(){const o=e.CHM(t),i=o.index,l=o.$implicit,d=e.oxw();return e.KtG(d.DeletePart(i,l.get("id").value))}),e.qZA(),e.TgZ(31,"i",26),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.MAs(7),d=e.MAs(21),g=e.MAs(14),_=e.MAs(28),O=e.oxw();return e.KtG(O.SavePart(i.get("id").value,l.value,d.value,g.value,_.value))}),e.qZA(),e._UZ(32,"i",27),e.qZA()()}2&n&&(e.Q6J("formGroupName",a.index),e.xp6(4),e.Oqu(e.lcZ(5,5,"Description")),e.xp6(7),e.Oqu(e.lcZ(12,7,"Price")),e.xp6(7),e.Oqu(e.lcZ(19,9,"Quantity")),e.xp6(7),e.Oqu(e.lcZ(26,11,"Total")))}function te(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",28)(5,"p")(6,"strong"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p")(11,"strong"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"p")(16,"strong"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._uU(19),e.ALo(20,"currency"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"Parts Summary")),e.xp6(5),e.Oqu(e.lcZ(8,9,"Total Parts")),e.xp6(2),e.hij(" ",t.parts.length," "),e.xp6(3),e.Oqu(e.lcZ(13,11,"Total Quantity")),e.xp6(2),e.hij(" ",t.getTotalQuantity()," "),e.xp6(3),e.Oqu(e.lcZ(18,13,"Total Price")),e.xp6(2),e.hij(" ",e.xi3(20,15,t.getTotalPrice(),"EGP")," ")}}let re=(()=>{class n{constructor(t,r,o,i,l){this.fb=t,this.data=r,this.PartService=o,this.Toaster=i,this.TranslateService=l,this.partsForm=this.fb.group({parts:this.fb.array([])})}ngOnInit(){this.LoadParts()}LoadParts(){this.PartService.GetPartsByOrderId(this.data.OrderId).subscribe({next:t=>{console.log("Start Load Parts"),this.parts.clear(),t.forEach(r=>{const o=this.fb.group({id:[r.id],description:[r.description],price:[r.price],qty:[r.quantity],total:[{value:r.total,disabled:!0}]});this.parts.push(o)})},error:t=>{this.Toaster.error("Failed to load parts")}})}get parts(){return this.partsForm.get("parts")}IsValidToAddNewPart(){return!(this.parts.controls.filter(r=>!r.get("id").value).length>0)}addPart(){if(!this.IsValidToAddNewPart())return void this.Toaster.error(this.TranslateService.instant("Cannot add new parts until all unsaved parts are saved."));const t=this.fb.group({id:[null],description:[""],price:[""],qty:[""],total:[{value:"",disabled:!0}]});this.parts.push(t)}calculateTotal(t){const r=this.parts.at(t),l=r.get("price").value*r.get("qty").value;r.get("total").setValue(l),console.log(r.get("total").value)}DeletePart(t,r){r?T().fire({title:this.TranslateService.instant("Are you sure?"),text:this.TranslateService.instant("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.TranslateService.instant("Yes, delete it"),cancelButtonText:this.TranslateService.instant("Cancel")}).then(o=>{o.isConfirmed&&this.PartService.DeletePart(r).subscribe({next:i=>{this.Toaster.success(this.TranslateService.instant("Part Deleted Successfully")),this.LoadParts()}})}):this.parts.removeAt(t)}SavePart(t,r,o,i,l){var d={Description:r,price:i,Quantity:o,Total:l,OrderId:this.data.OrderId,customerId:this.data.customerId};d.Description?d.price?d.Quantity?d.Total?null==t?this.PartService.CreatePart(d).subscribe({next:g=>{this.Toaster.success(this.TranslateService.instant("Part Added Successfully")),this.LoadParts()},error:g=>{this.Toaster.error("Failed to add the part. Please try again.")}}):this.PartService.EditPart(t,d).subscribe({next:g=>{this.Toaster.success(this.TranslateService.instant("Part Updated Successfully")),this.LoadParts()},error:g=>{this.Toaster.error("Failed to add the part. Please try again.")}}):this.Toaster.error("The total must be calculated before saving."):this.Toaster.error("Please enter the quantity for the part."):this.Toaster.error("Please enter the price for the part."):this.Toaster.error("Please enter a description for the part.")}getTotalQuantity(){return this.parts.controls.reduce((t,r)=>t+r.get("qty").value,0)}getTotalPrice(){return this.parts.controls.reduce((t,r)=>t+r.get("total").value,0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(m.WI),e.Y36(W),e.Y36(f._W),e.Y36(h.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mange-parts"]],decls:12,vars:8,consts:[[1,"container","mt-4"],["class","alert alert-warning","role","alert",4,"ngIf"],[3,"formGroup"],["formArrayName","parts"],["class","d-flex gap-1 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mt-1"],["type","button",1,"btn","btn-primary","mb-2",3,"disabled","click"],[1,"fa-solid","fa-square-plus"],["class","container mt-4",4,"ngIf"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","gap-1","mb-2",3,"formGroupName"],[1,"form-group"],["for","description"],["type","text","formControlName","description","placeholder","Enter description",1,"form-control"],["descreption",""],["for","price"],["type","number","formControlName","price","min","0","placeholder","Price",1,"form-control",3,"input"],["Price",""],["for","qty"],["type","number","min","0","formControlName","qty","placeholder","Quantity",1,"form-control",3,"input"],["Quantity",""],["for","total"],["type","text","formControlName","total","placeholder","Total","readonly","",1,"form-control"],["Total",""],[1,"d-flex","align-items-center","gap-2",2,"width","10%"],[1,"fs-5","mt-2","fa-solid","fa-trash","pointer",2,"margin-bottom","-10px",3,"click"],[1,"fs-5","mt-2","fa-solid","fa-floppy-disk","pointer",2,"margin-bottom","-10px",3,"click"],[1,""],[1,"alert","alert-info"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,z,3,3,"div",1),e.TgZ(5,"form",2)(6,"div",3),e.YNc(7,ee,33,13,"div",4),e.qZA(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return r.addPart()}),e._UZ(10,"i",7),e.qZA()()()(),e.YNc(11,te,21,18,"div",8)),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"Parts")),e.xp6(2),e.Q6J("ngIf",r.parts.length<=0),e.xp6(1),e.Q6J("formGroup",r.partsForm),e.xp6(2),e.Q6J("ngForOf",r.parts.controls),e.xp6(2),e.Q6J("disabled",!r.IsValidToAddNewPart()),e.xp6(2),e.Q6J("ngIf",r.parts.length>0))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,s.x0,s.CE,p.H9,h.X$]}),n})();function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"label",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",30),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.cashAmount=o)})("input",function(){e.CHM(t);const o=e.oxw(),i=e.MAs(37);return e.KtG(o.onPaymentMethodChange(i.checked,0))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"Cash")),e.xp6(2),e.Q6J("ngModel",t.cashAmount)}}function oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"label",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.creditAmount=o)})("input",function(){e.CHM(t);const o=e.oxw(),i=e.MAs(43);return e.KtG(o.onPaymentMethodChange(i.checked,1))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"Credit")),e.xp6(2),e.Q6J("ngModel",t.creditAmount)}}const ie=function(n){return{display:n}};let se=(()=>{class n{constructor(t,r,o,i,l){this.OrderService=t,this.data=r,this.MatdilogRef=o,this.ToasterService=i,this.translateService=l,this.NetCost=0,this.discount=0,this.isCash=!1,this.isCredit=!1,this.cashAmount=0,this.creditAmount=0}ngOnInit(){this.GetOrderDetails(),this.CalcNetCost()}GetOrderDetails(){this.OrderService.GetOrderDetails(this.data).subscribe({next:t=>{console.log(t),this.OrderDetails=t,this.CustomerBalance=t.customerBalance,this.partsCost=t.partsCost,this.CalcNetCost()}})}CalcNetCost(){let t=this.partsCost-this.CustomerBalance;t-=this.discount,this.NetCost=t>=0?t:0}onPaymentMethodChange(t,r){this.NetCost<=0||(0==r?t?this.cashAmount>0?this.creditAmount=this.NetCost-this.cashAmount:this.cashAmount=this.NetCost-this.creditAmount:(this.cashAmount=0,this.isCredit||(this.creditAmount=0)):t?this.creditAmount>0?this.cashAmount=this.NetCost-this.creditAmount:this.creditAmount=this.NetCost-this.cashAmount:(this.creditAmount=0,this.isCash||(this.cashAmount=0)))}FinishOrder(t,r,o){this.discount>100?this.ToasterService.error(this.translateService.instant("Discount cannot exceed 100")):!r&&!o&&this.CustomerBalance<this.partsCost&&0!=this.NetCost?this.ToasterService.error(this.translateService.instant("Please Choose Payment Type")):r&&o?this.ToasterService.error(this.translateService.instant("You cannot select more than one payment method")):this.OrderService.placedOrder({OrderId:t,CashAmount:this.cashAmount,IsCashPaymentType:r,discount:this.discount}).subscribe({next:l=>{this.MatdilogRef.close(),this.ToasterService.success(this.translateService.instant("Order Completed Successfully"))}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C),e.Y36(m.WI),e.Y36(m.so),e.Y36(f._W),e.Y36(h.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-placed-order"]],decls:54,vars:35,consts:[[1,"p-4","bg-light","rounded","container-fluid"],[1,"d-flex","gap-2","justify-content-between","mb-4"],[1,"form-group"],["for","total"],["type","text","id","total","name","partsCost","readonly","","placeholder","Enter total",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","balance"],["type","text","id","balance","placeholder","Enter balance","name","CustomerBalance","readonly","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],[2,"width","30%"],["for","discount",1,"text-nowrap"],["min","0","max","100","type","number","id","discount","placeholder","Enter discount","name","discount",1,"form-control","form-control-lg",3,"ngModel","ngModelChange","input"],[1,"row","mb-4"],[1,"col-md-4"],["for","net"],["name","NetCost","type","text","id","net","readonly","","placeholder","Enter net amount",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],[1,"row","mb-4",3,"ngStyle"],[1,"col-md-2"],[1,"text-nowrap"],[1,"form-check","form-check-inline"],["type","checkbox","id","cash","name","Cash",1,"form-check-input",3,"ngModel","ngModelChange","change"],["CashInput",""],["for","cash",1,"form-check-label"],["type","checkbox","id","credit","name","credit",1,"form-check-input",3,"ngModel","ngModelChange","change"],["CreditInput",""],["for","credit",1,"form-check-label","text-nowrap"],[1,"d-flex","justify-content-between","gap-2"],["class","form-group",4,"ngIf"],["class","form-group text-nowrap",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"text-nowrap","btn","btn-primary","btn-lg","m-e-3",3,"click"],["for","cashAmount"],["type","text","id","cashAmount","name","cashAmount","placeholder","Enter cash amount",1,"form-control","form-control-lg",3,"ngModel","ngModelChange","input"],[1,"form-group","text-nowrap"],["for","creditAmount"],["type","text","id","creditAmount","name","creditAmount","placeholder","Enter credit amount",1,"form-control","form-control-lg",3,"ngModel","ngModelChange","input"]],template:function(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div")(4,"div",2)(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"input",4),e.NdJ("ngModelChange",function(l){return r.partsCost=l}),e.qZA()()(),e.TgZ(9,"div")(10,"div",2)(11,"label",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(l){return r.CustomerBalance=l}),e.qZA()()(),e.TgZ(15,"div",7)(16,"div",2)(17,"label",8),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"input",9),e.NdJ("ngModelChange",function(l){return r.discount=l})("input",function(){return r.CalcNetCost()}),e.qZA()()()(),e.TgZ(21,"div",10)(22,"div",11)(23,"div",2)(24,"label",12),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"input",13),e.NdJ("ngModelChange",function(l){return r.NetCost=l}),e.qZA()()()(),e.TgZ(28,"div",14)(29,"div",15)(30,"div",2)(31,"div")(32,"label",16),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",17)(36,"input",18,19),e.NdJ("ngModelChange",function(l){return r.isCash=l})("change",function(){e.CHM(o);const l=e.MAs(37);return e.KtG(r.onPaymentMethodChange(l.checked,0))}),e.qZA(),e.TgZ(38,"label",20),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",17)(42,"input",21,22),e.NdJ("ngModelChange",function(l){return r.isCredit=l})("change",function(){e.CHM(o);const l=e.MAs(43);return e.KtG(r.onPaymentMethodChange(l.checked,1))}),e.qZA(),e.TgZ(44,"label",23),e._uU(45),e.ALo(46,"translate"),e.qZA()()()()(),e.TgZ(47,"div",24),e.YNc(48,ne,5,4,"div",25),e.YNc(49,oe,5,4,"div",26),e.qZA(),e.TgZ(50,"div",27)(51,"button",28),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(37),d=e.MAs(43);return e.KtG(r.FinishOrder(r.OrderDetails.orderId,l.checked,d.checked))}),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()}2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,17,"parts Cost")),e.xp6(2),e.Q6J("ngModel",r.partsCost),e.xp6(4),e.hij(" ",e.lcZ(13,19,"Balance"),""),e.xp6(2),e.Q6J("ngModel",r.CustomerBalance),e.xp6(4),e.hij("",e.lcZ(19,21,"Discount")," "),e.xp6(2),e.Q6J("ngModel",r.discount),e.xp6(5),e.Oqu(e.lcZ(26,23,"Net")),e.xp6(2),e.Q6J("ngModel",r.NetCost),e.xp6(1),e.Q6J("ngStyle",e.VKq(33,ie,0===r.NetCost?"none":"block")),e.xp6(5),e.Oqu(e.lcZ(34,25,"Payment Method")),e.xp6(3),e.Q6J("ngModel",r.isCash),e.xp6(3),e.Oqu(e.lcZ(40,27,"Cash")),e.xp6(3),e.Q6J("ngModel",r.isCredit),e.xp6(3),e.Oqu(e.lcZ(46,29,"Credit")),e.xp6(3),e.Q6J("ngIf",r.isCash),e.xp6(1),e.Q6J("ngIf",r.isCredit),e.xp6(3),e.hij(" ",e.lcZ(53,31,"Finish Order")," "))},dependencies:[p.O5,p.PC,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.qQ,s.Fd,s.On,s.F,h.X$],styles:[".form-container[_ngcontent-%COMP%]{border:1px solid black;padding:20px;margin:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();function ae(n,a){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.fullName," ")}}function le(n,a){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ce(n,a){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function de(n,a){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}let ue=(()=>{class n{constructor(t,r,o,i,l,d,g){this.ImagesService=t,this.data=r,this.CustomerServices=o,this.TechnicalService=i,this.StoreService=l,this.OrderTypeService=d,this.OrderService=g}ngOnInit(){this.InitializeOrderForm(),this.GetStores(),this.GetCusotmers(),this.GetOrderTypes(),this.GetTechnical(),this.LoadOrder(),this.OrderForm.disable()}GetStores(){this.StoreService.GetStores().subscribe({next:t=>{this.Stores=t}})}GetTechnical(){this.TechnicalService.GetTechnicals().subscribe({next:t=>{this.Technicals=t}})}GetOrderTypes(){this.OrderTypeService.GetOrderTypes().subscribe({next:t=>{this.OrderTypes=t}})}GetCusotmers(){this.CustomerServices.GetCustomers().subscribe({next:t=>{this.Customers=t,console.log(t)}})}InitializeOrderForm(){this.OrderForm=new s.cw({CustomerId:new s.NI(null,s.kI.required),StoreId:new s.NI(null,s.kI.required),OrderTypeId:new s.NI(null,s.kI.required),TechnicalId:new s.NI(null,s.kI.required),Description:new s.NI(null,s.kI.required),images:new s.NI(null)})}LoadOrder(){this.OrderService.GetOrderById(this.data.id).subscribe({next:t=>{console.log(t),this.OrderForm.setValue({CustomerId:t.customerId,StoreId:t.storeId,OrderTypeId:t.orderTypeId,TechnicalId:t.technicalId,Description:t.description,images:t.images||null})},error:t=>{console.error("Error loading order:",t)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(m.WI),e.Y36(x.v),e.Y36(A.e),e.Y36(b.d),e.Y36(I.s),e.Y36(C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-order-display"]],decls:33,vars:19,consts:[[1,"p-2",2,"overflow-y","auto"],[3,"formGroup"],[1,"d-flex","gap-2"],[1,"form-group","mb-3",2,"width","60%"],["for","customer"],["id","customer","formControlName","CustomerId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mb-3",2,"width","40%"],["for","orderType"],["id","orderType","formControlName","OrderTypeId",1,"form-control"],["for","store"],["id","store","formControlName","StoreId",1,"form-control"],["for","technical"],["id","technical","formControlName","TechnicalId",1,"form-control"],[1,"form-group","mb-3"],["for","description"],["id","description","placeholder","Enter description","rows","3","formControlName","Description",1,"form-control"],[3,"OrderId","ToUpdate"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"select",5),e.YNc(8,ae,2,2,"option",6),e.qZA()(),e.TgZ(9,"div",7)(10,"label",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"select",9),e.YNc(14,le,2,2,"option",6),e.qZA()()(),e.TgZ(15,"div",2)(16,"div",7)(17,"label",10),e._uU(18," Store"),e.qZA(),e.TgZ(19,"select",11),e.YNc(20,ce,2,2,"option",6),e.qZA()(),e.TgZ(21,"div",3)(22,"label",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"select",13),e.YNc(26,de,2,2,"option",6),e.qZA()()(),e.TgZ(27,"div",14)(28,"label",15),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"textarea",16),e.qZA()(),e._UZ(32,"app-galary",17),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",r.OrderForm),e.xp6(4),e.hij(" ",e.lcZ(6,11,"Customer"),""),e.xp6(3),e.Q6J("ngForOf",r.Customers),e.xp6(3),e.hij(" ",e.lcZ(12,13,"Order Type"),""),e.xp6(3),e.Q6J("ngForOf",r.OrderTypes),e.xp6(6),e.Q6J("ngForOf",r.Stores),e.xp6(3),e.hij(" ",e.lcZ(24,15,"Technical"),""),e.xp6(3),e.Q6J("ngForOf",r.Technicals),e.xp6(3),e.Oqu(e.lcZ(30,17,"Description")),e.xp6(3),e.Q6J("OrderId",r.data)("ToUpdate",!0))},dependencies:[p.sg,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,N,h.X$]}),n})();var y=c(7406),pe=c(1728);function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"label",23)(1,"li"),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",24),e.qZA(),e.TgZ(5,"input",25),e.NdJ("change",function(o){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.OnFileChange(o,i.id))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled","Completion"==t.orderStatus),e.xp6(2),e.hij(" ",e.lcZ(3,2,"delevered")," ")}}function he(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw();return e.KtG(i.PlacedthisOrder(o.id))}),e.TgZ(1,"li"),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",26),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled","Completion"==t.orderStatus),e.xp6(2),e.hij(" ",e.lcZ(3,2,"placed order")," ")}}const ge=function(n){return{CompletedOrder:n}};function fe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",10)(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"th"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",11)(16,"button",12),e._UZ(17,"i",13),e.TgZ(18,"mat-icon"),e._uU(19,"keyboard_arrow_down"),e.qZA()(),e.TgZ(20,"mat-menu",null,14)(22,"button",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.DisplayOrder(i.id))}),e.TgZ(23,"li"),e._uU(24),e.ALo(25,"translate"),e._UZ(26,"i",16),e.qZA()(),e.TgZ(27,"button",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.OpenDilogForEdit(i.id))}),e.TgZ(28,"li"),e._uU(29),e.ALo(30,"translate"),e._UZ(31,"i",18),e.qZA()(),e.TgZ(32,"button",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.OpenDilogForParts(i.id,i.customerId))}),e.TgZ(33,"li"),e._uU(34),e.ALo(35,"translate"),e._UZ(36,"i",19),e.qZA()(),e.YNc(37,me,6,4,"label",20),e.YNc(38,he,5,4,"button",21),e.TgZ(39,"button",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.DeleteOrder(i.id))}),e.TgZ(40,"li"),e._uU(41),e.ALo(42,"translate"),e._UZ(43,"i",22),e.qZA()()()()()}if(2&n){const t=a.$implicit,r=e.MAs(21);e.Q6J("ngClass",e.VKq(25,ge,"Completion"==t.orderStatus)),e.xp6(2),e.Oqu("#"+t.id),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.customerPhoneNumber),e.xp6(2),e.Oqu(t.orderTypeName),e.xp6(2),e.Oqu(t.orderStatus),e.xp6(2),e.Oqu(t.storeName),e.xp6(2),e.Oqu(t.technicalName),e.xp6(2),e.Q6J("matMenuTriggerFor",r),e.xp6(8),e.hij(" ",e.lcZ(25,17,"show")," "),e.xp6(3),e.Q6J("disabled","Completion"==t.orderStatus),e.xp6(2),e.hij(" ",e.lcZ(30,19,"Edit")," "),e.xp6(3),e.Q6J("disabled","Completion"==t.orderStatus),e.xp6(2),e.hij(" ",e.lcZ(35,21,"Parts")," "),e.xp6(3),e.Q6J("ngIf",t.partsCount>=1),e.xp6(1),e.Q6J("ngIf",t.isHavePartsAndDeliveredImages),e.xp6(3),e.hij(" ",e.lcZ(42,23,"Delete")," ")}}const Ce=[{path:"",component:(()=>{class n{constructor(t,r,o,i,l){this.OrderService=t,this.Dilog=r,this.Toaster=o,this.ImagesService=i,this.TranslateService=l,this.Lang=localStorage.getItem("lang")}ngOnInit(){this.GetAllOrders()}GetAllOrders(){this.OrderService.GetOrders(null).subscribe({next:t=>{console.log(t),this.Orders=t}})}OpenDilogForEdit(t){this.Dilog.open(P,{disableClose:!0,data:t}).afterClosed().subscribe({next:o=>{this.GetAllOrders()}})}DeleteOrder(t){T().fire({title:this.TranslateService.instant("Are you sure?"),text:this.TranslateService.instant("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.TranslateService.instant("Yes, delete it"),cancelButtonText:this.TranslateService.instant("Cancel")}).then(r=>{r.isConfirmed&&this.OrderService.DeleteOrder(t).subscribe({next:o=>{this.Toaster.success(this.TranslateService.instant("Order Deleted Successfully")),this.GetAllOrders()}})})}ShowDilog(){this.Dilog.open(P,{disableClose:!0}).afterClosed().subscribe({next:r=>{r&&this.GetAllOrders()}})}OnSearch(t){this.OrderService.GetOrders(t).subscribe({next:r=>{this.Orders=r}})}OpenDilogForParts(t,r){this.Dilog.open(re,{data:{OrderId:t,customerId:r}}).afterClosed().subscribe({next:i=>{this.GetAllOrders()}})}OnFileChange(t,r){const o=new FormData,i=t.target.files;if(console.log(i),i.length>4)this.Toaster.error(this.TranslateService.instant("You are not allowed to upload more than 4 images."));else{for(let l=0;l<i.length;l++)o.append("formFiles",i[l],i[l].name);o.append("orderId",r),o.append("IsReceiving",String(!1)),this.ImagesService.BulkImport(o).subscribe({next:l=>{this.GetAllOrders(),this.Toaster.success(this.TranslateService.instant("Images Delivered Successfuly"))}})}}PlacedthisOrder(t){this.Dilog.open(se,{data:t}).afterClosed().subscribe({next:o=>{this.GetAllOrders()}})}DisplayOrder(t){this.Dilog.open(ue,{data:{id:t,isUpdatable:!1}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C),e.Y36(m.uw),e.Y36(f._W),e.Y36(Z),e.Y36(h.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-order-list"]],decls:40,vars:32,consts:[[2,"overflow-x","auto"],[1,"d-flex","justify-content-between"],["for",""],["type","text","placeholder","Search For any Field",1,"form-control","mb-1",3,"input"],["SearchQuery",""],[1,"btn","btn-primary","m-1",3,"click"],[1,"table","table-hover"],[1,"bg-dark"],["scope","col",1,"text-light"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex","gap-2"],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-bars"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"fs-6","fa-solid","fa-eye","pointer"],["mat-menu-item","",3,"disabled","click"],[1,"fs-6","fa-solid","fa-pen-to-square","pointer"],[1,"fs-6","fa-solid","fa-paste","pointer"],["mat-menu-item","","for","InpFile",3,"disabled",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],[1,"fs-6","fa-solid","fa-trash","pointer"],["mat-menu-item","","for","InpFile",3,"disabled"],[1,"fa-solid","fa-list"],["id","InpFile","type","file","multiple","",1,"d-none",3,"change"],[1,"fs-6","fa-regular","fa-credit-card"]],template:function(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"strong",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",3,4),e.NdJ("input",function(){e.CHM(o);const l=e.MAs(7);return e.KtG(r.OnSearch(l.value))}),e.qZA()(),e.TgZ(8,"button",5),e.NdJ("click",function(){return r.ShowDilog()}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"table",6)(12,"thead",7)(13,"tr")(14,"th",8),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",8),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th",8),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th",8),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"th",8),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"th",8),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th",8),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th",8),e._uU(36),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"tbody"),e.YNc(39,fe,44,27,"tr",9),e.qZA()()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,12,"Search")),e.xp6(5),e.hij(" ",e.lcZ(10,14,"Create Order")," "),e.xp6(2),e.uIk("dir","ar"===r.Lang?"rtl":"ltr"),e.xp6(4),e.Oqu(e.lcZ(16,16,"Order Number")),e.xp6(3),e.hij(" ",e.lcZ(19,18,"Customer Name")," "),e.xp6(3),e.hij(" ",e.lcZ(22,20,"Customer Mobile")," "),e.xp6(3),e.hij(" ",e.lcZ(25,22,"Order Type Name")," "),e.xp6(3),e.Oqu(e.lcZ(28,24,"Status")),e.xp6(3),e.Oqu(e.lcZ(31,26,"Store Name")),e.xp6(3),e.hij(" ",e.lcZ(34,28,"Technical Name")," "),e.xp6(3),e.Oqu(e.lcZ(37,30,"Actions")),e.xp6(3),e.Q6J("ngForOf",r.Orders))},dependencies:[p.mk,p.sg,p.O5,y.VK,y.OP,y.p6,U.Hw,pe.lW,h.X$],styles:[".CompletedOrder[_ngcontent-%COMP%]{background-color:#ede9e9}"]}),n})(),canActivate:[c(652).p]}];let Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[S.Bz.forChild(Ce),S.Bz,s.UX,s.u5]}),n})();var ve=c(4493);let Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,Te,ve.m]}),n})()}}]);